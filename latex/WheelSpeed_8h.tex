\hypertarget{WheelSpeed_8h}{}\doxysection{Inc/\+Sensors/\+Digital\+Sensors/\+Wheel\+Speed.h File Reference}
\label{WheelSpeed_8h}\index{Inc/Sensors/DigitalSensors/WheelSpeed.h@{Inc/Sensors/DigitalSensors/WheelSpeed.h}}
{\ttfamily \#include \char`\"{}../\+Digital\+Sensor.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}../../\+Utils/\+Wheel\+Location.\+h\char`\"{}}\newline
Include dependency graph for Wheel\+Speed.\+h\+:
% FIG 0
This graph shows which files directly or indirectly include this file\+:
% FIG 1
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structWheelSpeed}{Wheel\+Speed}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{WheelSpeed_8h_ac49732714bcdc5c6bb1c4f94ddf497b3}{init\+Wheel\+Speed}} (\mbox{\hyperlink{structWheelSpeed}{Wheel\+Speed}} $\ast$ws, int hz, int port, float radius, int num\+Teeth, \mbox{\hyperlink{WheelLocation_8h_a6bcc31f28038e411321704f9947331d7}{WHEEL\+\_\+\+LOCATION}} location)
\begin{DoxyCompactList}\small\item\em Initialization function for a wheel speed sensor. \end{DoxyCompactList}\item 
float \mbox{\hyperlink{WheelSpeed_8h_a9b06a45c350af910e0b84912802616b9}{calculate\+Speed}} (\mbox{\hyperlink{structWheelSpeed}{Wheel\+Speed}} $\ast$ws)
\begin{DoxyCompactList}\small\item\em Translates data to speed in mph. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{WheelSpeed_8h_a92ea112da554d5de8a6b9204fa30381a}{update\+Wheel\+Speed}} (void $\ast$ws)
\begin{DoxyCompactList}\small\item\em Updated the speed var in this sensor. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{WheelSpeed_8h_a8a44c706d5c92c453cfbd4e7be159c36}{set\+Time\+Interval}} (\mbox{\hyperlink{structWheelSpeed}{Wheel\+Speed}} $\ast$ws, float interval)
\begin{DoxyCompactList}\small\item\em Set time interval. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{WheelSpeed_8h_a27cf8300dac12d235a50cf77b9f9aaac}{add\+Pulse}} (\mbox{\hyperlink{structWheelSpeed}{Wheel\+Speed}} $\ast$wf, int num)
\begin{DoxyCompactList}\small\item\em Add pulses to sensor;. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{WheelSpeed_8h_a27cf8300dac12d235a50cf77b9f9aaac}\label{WheelSpeed_8h_a27cf8300dac12d235a50cf77b9f9aaac}} 
\index{WheelSpeed.h@{WheelSpeed.h}!addPulse@{addPulse}}
\index{addPulse@{addPulse}!WheelSpeed.h@{WheelSpeed.h}}
\doxysubsubsection{\texorpdfstring{addPulse()}{addPulse()}}
{\footnotesize\ttfamily void add\+Pulse (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structWheelSpeed}{Wheel\+Speed}} $\ast$}]{wf,  }\item[{int}]{num }\end{DoxyParamCaption})}



Add pulses to sensor;. 

\begin{DoxyNote}{Note}
For testing and debugging.
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em ws} & A pointer to the \mbox{\hyperlink{structWheelSpeed}{Wheel\+Speed}} structure. \\
\hline
{\em num} & Number of pulses to add. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{WheelSpeed_8c_source_l00066}{66}} of file \mbox{\hyperlink{WheelSpeed_8c_source}{Wheel\+Speed.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00066                                        \{}
\DoxyCodeLine{00067     ws-\/>pulses += num;}
\DoxyCodeLine{00068 \}}

\end{DoxyCode}
\mbox{\Hypertarget{WheelSpeed_8h_a9b06a45c350af910e0b84912802616b9}\label{WheelSpeed_8h_a9b06a45c350af910e0b84912802616b9}} 
\index{WheelSpeed.h@{WheelSpeed.h}!calculateSpeed@{calculateSpeed}}
\index{calculateSpeed@{calculateSpeed}!WheelSpeed.h@{WheelSpeed.h}}
\doxysubsubsection{\texorpdfstring{calculateSpeed()}{calculateSpeed()}}
{\footnotesize\ttfamily float calculate\+Speed (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structWheelSpeed}{Wheel\+Speed}} $\ast$}]{ws }\end{DoxyParamCaption})}



Translates data to speed in mph. 


\begin{DoxyParams}{Parameters}
{\em ws} & A pointer to the \mbox{\hyperlink{structWheelSpeed}{Wheel\+Speed}} structure. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The speed in miles per hour. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{WheelSpeed_8c_source_l00024}{24}} of file \mbox{\hyperlink{WheelSpeed_8c_source}{Wheel\+Speed.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00024                                      \{}
\DoxyCodeLine{00025     \textcolor{comment}{// Check if the pointer is null}}
\DoxyCodeLine{00026     \textcolor{keywordflow}{if} (ws == NULL) \{}
\DoxyCodeLine{00027         fprintf(stderr, \textcolor{stringliteral}{"{}Error: Null pointer passed to calculateSpeed\(\backslash\)n"{}});}
\DoxyCodeLine{00028         \textcolor{keywordflow}{return} -\/1; \textcolor{comment}{// Or handle the error as appropriate}}
\DoxyCodeLine{00029     \}}
\DoxyCodeLine{00030 }
\DoxyCodeLine{00031     \textcolor{keywordtype}{int} numTeeth = ws-\/>\mbox{\hyperlink{structWheelSpeed_acca8266f1bc14244ade0afb42cf5a1d5}{numTeeth}};}
\DoxyCodeLine{00032     \textcolor{keywordtype}{float} radius = ws-\/>\mbox{\hyperlink{structWheelSpeed_aa54a56855e20fb6bdc11ae0db9b0e5aa}{radius}};}
\DoxyCodeLine{00033     \textcolor{keywordtype}{int} pulses = ws-\/>\mbox{\hyperlink{structWheelSpeed_a9797aef29f050455eddc81891a4278a3}{pulses}};}
\DoxyCodeLine{00034     \textcolor{keywordtype}{float} delta = \mbox{\hyperlink{TimeUtils_8h_ab811d2f5aa3466ef464b7e2a8ff6c31d}{measureInterval}}(ws-\/>\mbox{\hyperlink{structWheelSpeed_a454f0d96c91e9ddd41b215873fdef473}{interval}});}
\DoxyCodeLine{00035 }
\DoxyCodeLine{00036     \textcolor{comment}{// Reset pulse count and elapsed time for the next measurement interval}}
\DoxyCodeLine{00037     ws-\/>\mbox{\hyperlink{structWheelSpeed_a454f0d96c91e9ddd41b215873fdef473}{interval}} = \mbox{\hyperlink{TimeUtils_8h_aee85a3385434e4615f588684cb7c5aca}{getCurrentTime}}();}
\DoxyCodeLine{00038     ws-\/>\mbox{\hyperlink{structWheelSpeed_a9797aef29f050455eddc81891a4278a3}{pulses}} = 0;}
\DoxyCodeLine{00039 }
\DoxyCodeLine{00040     \textcolor{comment}{// Verify inputs}}
\DoxyCodeLine{00041     \textcolor{keywordflow}{if} (numTeeth <= 0 || radius <= 0.0f || pulses <= 0 || delta <= 0.0) \{}
\DoxyCodeLine{00042         printf(\textcolor{stringliteral}{"{}Error: Invalid argument. "{}}}
\DoxyCodeLine{00043                \textcolor{stringliteral}{"{}NumTeeth = \%d, Radius = \%.2f, Pulses = \%d, Time Delta = \%.2f\(\backslash\)n"{}},}
\DoxyCodeLine{00044                numTeeth, radius, pulses, delta);}
\DoxyCodeLine{00045         \textcolor{keywordflow}{return} 0.0f;}
\DoxyCodeLine{00046     \}}
\DoxyCodeLine{00047 }
\DoxyCodeLine{00048     \textcolor{comment}{// Calculations}}
\DoxyCodeLine{00049     \textcolor{keywordtype}{float} circumference = 2 * \mbox{\hyperlink{WheelSpeed_8c_ae71449b1cc6e6250b91f539153a7a0d3}{M\_PI}} * radius;}
\DoxyCodeLine{00050     \textcolor{keywordtype}{float} distancePerPulse = circumference / numTeeth;}
\DoxyCodeLine{00051     \textcolor{keywordtype}{float} speedMetersPerSecond = (distancePerPulse * pulses) / delta;}
\DoxyCodeLine{00052     \textcolor{keywordtype}{float} speed = \mbox{\hyperlink{Conversions_8h_afc7e7aa256276c3574cb19108257cfc8}{convertMpsToMph}}(speedMetersPerSecond);}
\DoxyCodeLine{00053 }
\DoxyCodeLine{00054     \textcolor{keywordflow}{return} speed;}
\DoxyCodeLine{00055 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
% FIG 2
Here is the caller graph for this function\+:
% FIG 3
\mbox{\Hypertarget{WheelSpeed_8h_ac49732714bcdc5c6bb1c4f94ddf497b3}\label{WheelSpeed_8h_ac49732714bcdc5c6bb1c4f94ddf497b3}} 
\index{WheelSpeed.h@{WheelSpeed.h}!initWheelSpeed@{initWheelSpeed}}
\index{initWheelSpeed@{initWheelSpeed}!WheelSpeed.h@{WheelSpeed.h}}
\doxysubsubsection{\texorpdfstring{initWheelSpeed()}{initWheelSpeed()}}
{\footnotesize\ttfamily void init\+Wheel\+Speed (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structWheelSpeed}{Wheel\+Speed}} $\ast$}]{ws,  }\item[{int}]{hz,  }\item[{int}]{port,  }\item[{float}]{radius,  }\item[{int}]{num\+Teeth,  }\item[{\mbox{\hyperlink{WheelLocation_8h_a6bcc31f28038e411321704f9947331d7}{WHEEL\+\_\+\+LOCATION}}}]{location }\end{DoxyParamCaption})}



Initialization function for a wheel speed sensor. 


\begin{DoxyParams}{Parameters}
{\em ws} & A pointer to the \mbox{\hyperlink{structWheelSpeed}{Wheel\+Speed}} structure. @pram hz Rate at which the sensor is called (in hz). @pram port Location of sensor. @pram radius Radius of wheel (in mm). @pram num\+Teeth Number of teeth on reluctor wheel. @pram location Location of sensor on car. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{WheelSpeed_8c_source_l00012}{12}} of file \mbox{\hyperlink{WheelSpeed_8c_source}{Wheel\+Speed.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00013                                              \{}
\DoxyCodeLine{00014     \mbox{\hyperlink{DigitalSensor_8h_a2bf0b31c332d3808de755eb6bf35b3c5}{initDigitalSensor}}(\&ws-\/>\mbox{\hyperlink{structWheelSpeed_ac9ad06f7e5816697f4bfea770b9722b2}{base}}, \textcolor{stringliteral}{"{}Wheel Speed"{}}, hz, port);}
\DoxyCodeLine{00015     ws-\/>\mbox{\hyperlink{structWheelSpeed_ac9ad06f7e5816697f4bfea770b9722b2}{base}}.\mbox{\hyperlink{structDigitalSensor_aa5cfba5a7ccb124822fa1d8a2aac9ece}{sensor}}.\mbox{\hyperlink{structSensor_a7e6cf7138f6d350fd2bf0a76fba7a2ad}{updateable}}.\mbox{\hyperlink{structUpdateable_a16ae43b8576f63634cc825a7294c7a78}{update}} = \mbox{\hyperlink{WheelSpeed_8c_a92ea112da554d5de8a6b9204fa30381a}{updateWheelSpeed}};}
\DoxyCodeLine{00016     ws-\/>\mbox{\hyperlink{structWheelSpeed_aa54a56855e20fb6bdc11ae0db9b0e5aa}{radius}} = radius;}
\DoxyCodeLine{00017     ws-\/>\mbox{\hyperlink{structWheelSpeed_a1fd60e20c5451a8c92a570b56a28cfb6}{wheel\_location}} = location;}
\DoxyCodeLine{00018     ws-\/>\mbox{\hyperlink{structWheelSpeed_acca8266f1bc14244ade0afb42cf5a1d5}{numTeeth}} = numTeeth;}
\DoxyCodeLine{00019     ws-\/>\mbox{\hyperlink{structWheelSpeed_a9797aef29f050455eddc81891a4278a3}{pulses}} = 0;}
\DoxyCodeLine{00020     ws-\/>\mbox{\hyperlink{structWheelSpeed_a6d8b62cdae99f0980adf213fe71558e1}{speed}} = 0.0f;}
\DoxyCodeLine{00021     ws-\/>\mbox{\hyperlink{structWheelSpeed_a454f0d96c91e9ddd41b215873fdef473}{interval}} = \mbox{\hyperlink{TimeUtils_8h_aee85a3385434e4615f588684cb7c5aca}{getCurrentTime}}();}
\DoxyCodeLine{00022 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
% FIG 4
\mbox{\Hypertarget{WheelSpeed_8h_a8a44c706d5c92c453cfbd4e7be159c36}\label{WheelSpeed_8h_a8a44c706d5c92c453cfbd4e7be159c36}} 
\index{WheelSpeed.h@{WheelSpeed.h}!setTimeInterval@{setTimeInterval}}
\index{setTimeInterval@{setTimeInterval}!WheelSpeed.h@{WheelSpeed.h}}
\doxysubsubsection{\texorpdfstring{setTimeInterval()}{setTimeInterval()}}
{\footnotesize\ttfamily void set\+Time\+Interval (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structWheelSpeed}{Wheel\+Speed}} $\ast$}]{ws,  }\item[{float}]{interval }\end{DoxyParamCaption})}



Set time interval. 

\begin{DoxyNote}{Note}
For testing and debugging.
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em ws} & A pointer to the \mbox{\hyperlink{structWheelSpeed}{Wheel\+Speed}} structure. \\
\hline
{\em interval} & Time interval to set. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{WheelSpeed_8c_source_l00062}{62}} of file \mbox{\hyperlink{WheelSpeed_8c_source}{Wheel\+Speed.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00062                                                      \{}
\DoxyCodeLine{00063     ws-\/>\mbox{\hyperlink{structWheelSpeed_a454f0d96c91e9ddd41b215873fdef473}{interval}} = interval + \mbox{\hyperlink{TimeUtils_8h_aee85a3385434e4615f588684cb7c5aca}{getCurrentTime}}();}
\DoxyCodeLine{00064 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
% FIG 5
\mbox{\Hypertarget{WheelSpeed_8h_a92ea112da554d5de8a6b9204fa30381a}\label{WheelSpeed_8h_a92ea112da554d5de8a6b9204fa30381a}} 
\index{WheelSpeed.h@{WheelSpeed.h}!updateWheelSpeed@{updateWheelSpeed}}
\index{updateWheelSpeed@{updateWheelSpeed}!WheelSpeed.h@{WheelSpeed.h}}
\doxysubsubsection{\texorpdfstring{updateWheelSpeed()}{updateWheelSpeed()}}
{\footnotesize\ttfamily void update\+Wheel\+Speed (\begin{DoxyParamCaption}\item[{void $\ast$}]{ws }\end{DoxyParamCaption})}



Updated the speed var in this sensor. 


\begin{DoxyParams}{Parameters}
{\em ws} & A pointer to the \mbox{\hyperlink{structWheelSpeed}{Wheel\+Speed}} structure. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{WheelSpeed_8c_source_l00057}{57}} of file \mbox{\hyperlink{WheelSpeed_8c_source}{Wheel\+Speed.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00057                                 \{}
\DoxyCodeLine{00058     \mbox{\hyperlink{structWheelSpeed}{WheelSpeed}}* wsPtr = (\mbox{\hyperlink{structWheelSpeed}{WheelSpeed}}*)ws;}
\DoxyCodeLine{00059     wsPtr-\/>\mbox{\hyperlink{structWheelSpeed_a6d8b62cdae99f0980adf213fe71558e1}{speed}} = \mbox{\hyperlink{WheelSpeed_8c_a9b06a45c350af910e0b84912802616b9}{calculateSpeed}}(ws);}
\DoxyCodeLine{00060 \}}

\end{DoxyCode}
Here is the call graph for this function\+:
% FIG 6
Here is the caller graph for this function\+:
% FIG 7
